\textit{Urban perception} is a feeling held by people about a location. These feelings can be and
are often related to a particular characteristic, like happiness or beauty, or also
inherently negative ones, like insecurity or fear \cite{tamara_judgments}. Understanding the
cause of these feelings is a complex task, since unique social and psychological aspects
of each individual affect how they perceive and the spaces they observe \cite{nasar_perception}.

Visual urban perception is  responsible for a large parte of the experience that people
go through while  being at or using an urban space. This not only affects how much the spaces
themselves are used \cite{khisty} but also the use of related means of transport \cite{antonakos}.
Other studies have also found correlations between urban perception, crime statistics \cite{tamara_judgments}
and wealth, and therefore used it as a proxy measure of inequality \cite{tamara_judgments,hidalgo_inequality, rossetti}.

Additionally, being able to measure a community's need and perception of a city at scale is something
of key importance on developing cities. The insights can be applied for design of public policy
so that local governments can allocate their resources more efficiently \cite{santani}.

Traditional methods for obtaining this information, consist of hand made polls
about specific locations, making systematic quantification of perception  an extremely costly and hard
to escalate task \cite{nasar_perception,clifton}. An alternate approach consists of surveys based on
computer generated images of simulated spaces. This scheme is more scalable, but is limited to experimental
design and cannot be directly applied to real urban spaces \cite{lain_grenspace,iglesias_perception}.

Currently, thanks to the great volumes of data generated by web platforms \cite{hidalgo_inequality}
and to modern deep learning (DL) and computer vision techniques \cite{lecun_dl}, new solutions for
quantifying urban perception at scale have become feasible. The Place Pulse 2.0 dataset \cite{hidalgo_placepulse},
is the most significant example of this, consisting of pairs of images
along with labels that indicate which of the images is more representative of a particular attribute.
Previous studies have achieved significant results with it, either by applying traditional deep learning \cite{hidalgo_placepulse}
or by combining it with other approaches \cite{rossetti, zhang_measuring}. In general, works trying to quantify
urban perception at scale consist of training deep convolutional neural network models (DCNN)
\cite{lecun_mnist} with datasets of urban images that have some sort of label that is used
as an estimator for the perception of that urban space, such as Place Pulse 2.0.

However, current deep learning methodologies, have the disadvantage of being ``black boxes''. In other
words, they lack a direct or systematic way to explain or interpret the obtained results. This problem
comes from the layered structure of the neural network models and from the millions of learnable parameters
they contain. Many of the problems in which these models are used would greatly benefit of more
human understandable explanations of the results, since they provide more confidence and control
over the decisions influenced by the systems. Due to that, explainability has become a very important area of
research for the deep learning field \cite{adadi_xai, ras_explanation}. For the particular case of urban perception,
explainability of the results is of utmost importance, since the added information is valuable
for the design of public policy. For instance, it could be used to better discriminate which locations
would be better recipients of an intervention, and which elements to modify so it convenes
an effective improvement of perception. Despite that, a fully explainable approach is yet to be
proposed and the purpose of this work is to progress towards that objective.

The research community has realized the importance of explainability
and has taken the research in two main directions. One direction is to design novel
neural network architectures and training methods with the intention of making them interpretable,
such as the work by \citeA{dong_semantic}. The other
direction is to  create post-hoc algorithms \cite{adadi_xai} that analyze the results given by the
neural network. These algorithms commonly use machine learning models, including neural networks \cite{kim_ace}.
In particular, the work by \citeA{rossetti}, presents an approach that uses semantic segmentations of  images
\cite{segnet} as input for a discrete choice model that estimates an utility function quantifying the
perception of citizens regarding different concepts, such as beauty and safety.
Among other things, this approach allows for a post-hoc aggregated analysis of the results, based
on the coefficients of the utility functions, which quantify the importance of each of the explainable input variables.
Is important to note that this type of techniques usually imply
a trade-off between the prediction performance of the model
and it's explainability.

The objective of this work is to design and train a model for the urban perception problem,
that can give explainable insights on an instance level. For that it proposes a novel solution,
consisting of a neural network architecture, that is end-to-end trainable and by using semantic
segmentation \cite{pspnet} and self attention mechanisms \cite{vaswani_attention} can show
explainable insights for each of the input images.

The remainder of this manuscript is organized as follows, chapter 2 summarizes relevant previous research.
Chapter 3 describes the dataset used and how it was pre processed.
In chapter 4 the problem is formally defined and our models are described. Chapter 5 gives
details on model implementation and training. Chapter 6 presents the research results
and 7 the related discussion. Finally, Chapter 8 consists of an applied case study on the
city of Santiago Chile and chapter 9 gives the final conclusions and future research directions.
